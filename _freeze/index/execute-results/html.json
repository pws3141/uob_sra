{
  "hash": "0f388094a1a4b6e0cebf3464b81416c5",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Interview Presentation\nsubtitle: SRA (Genetic Epidemiology and Medical Statistics)\nauthor: \"[Paul Smith](mailto:psmith@posteo.net)\"\ndate: 2024-12-12\ndate-format: \"MMM D, YYYY\"\nformat:\n  revealjs:\n    theme: serif\n    fontsize: 2em\n    df-print: paged # pages html tables: https://quarto.org/docs/computations/r.html#data-frames\nexecute:\n  echo: false\nlogo: https://www.bristol.ac.uk/styles/t4/responsive/uob-logo.svg\n---\n\n\n\n# A Recent Project\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\n\n\n## Background\n\n- A retrospective cohort study investigating enhanced recover after surgery (ERAS) on (log) patient length of stay after kidney transplantation.\n- ERAS is implemented at a centre-level.\n- Eighteen hospitals (approx half have ERAS) and approx 200 patients.\n- Working alongside a surgeon: the initial thought was to do a mixed model where centre is a random effect, and ERAS is a fixed binary effect\n\n::: {.notes}\n- ERAS: ERAS is a way of managing patients after a transplant, to try and get\n  them discharged and back to normal activity as quickly as possible\n- Structure of the data is:\n    - Centre level data on whether a formal ERAS programme is in place. Along with some details of what this ERAS programme entails.\n    - Patient level data on donor/recipient/operative details and outcomes.\n- Confounding:\n  - between the ERAS and centre effects,\n  - also a human factor in all of this, with respect to how/ when ERAS is\n    implemented in a centre.\n- Blood and Transplant Research Units (BTRU) project: Organ donation and transplantation stream\n:::\n\n## Initial thoughts\n\nA multilevel model for the log of length of stay.\n\n::: {style=\"font-size: 50%;\"}\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nmodel_main <- lmer(Log2lengthstay ~ Centre_ERAS_status + donor_age +\n                     donor_type*CIT_mins + age + who_performance_status + \n                     pre_emptivetx + (1|centre), data = data_craft)\nsummary(model_main)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nLinear mixed model fit by REML. t-tests use Satterthwaite's method [\nlmerModLmerTest]\nFormula: Log2lengthstay ~ Centre_ERAS_status + donor_age + donor_type *  \n    CIT_mins + age + who_performance_status + pre_emptivetx +      (1 | centre)\n   Data: data_craft\n\nREML criterion at convergence: 523.6\n\nScaled residuals: \n    Min      1Q  Median      3Q     Max \n-2.0079 -0.6863 -0.2120  0.5043  3.2779 \n\nRandom effects:\n Groups   Name        Variance Std.Dev.\n centre   (Intercept) 0.02926  0.1710  \n Residual             0.47776  0.6912  \nNumber of obs: 213, groups:  centre, 18\n\nFixed effects:\n                                 Estimate Std. Error         df t value\n(Intercept)                     2.131e+00  2.858e-01  1.618e+02   7.457\nCentre_ERAS_statusYes-Formal    2.040e-01  1.526e-01  1.104e+01   1.337\nCentre_ERAS_statusYes-Informal  2.512e-01  1.537e-01  2.128e+01   1.634\ndonor_age                       9.169e-04  3.895e-03  1.950e+02   0.235\ndonor_typeDBD                   1.028e-01  2.980e-01  1.938e+02   0.345\ndonor_typeDCD                   2.601e-01  3.196e-01  1.975e+02   0.814\nCIT_mins                        6.768e-04  6.030e-04  2.000e+02   1.122\nage                             5.162e-03  4.049e-03  1.984e+02   1.275\nwho_performance_status1         2.437e-01  1.137e-01  1.999e+02   2.142\nwho_performance_status>1        3.432e-01  1.763e-01  2.000e+02   1.946\npre_emptivetx1                 -2.373e-01  1.356e-01  1.963e+02  -1.751\ndonor_typeDBD:CIT_mins         -6.433e-04  6.564e-04  1.992e+02  -0.980\ndonor_typeDCD:CIT_mins         -1.474e-04  6.707e-04  1.994e+02  -0.220\n                               Pr(>|t|)    \n(Intercept)                     5.1e-12 ***\nCentre_ERAS_statusYes-Formal     0.2080    \nCentre_ERAS_statusYes-Informal   0.1169    \ndonor_age                        0.8141    \ndonor_typeDBD                    0.7304    \ndonor_typeDCD                    0.4168    \nCIT_mins                         0.2630    \nage                              0.2038    \nwho_performance_status1          0.0334 *  \nwho_performance_status>1         0.0530 .  \npre_emptivetx1                   0.0816 .  \ndonor_typeDBD:CIT_mins           0.3283    \ndonor_typeDCD:CIT_mins           0.8263    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n```\n\n\n:::\n:::\n\n\n:::\n\n::: {.notes}\n- Linear Mixed-Effects Model output\n- My job is to take a step back and discuss with them the limitations of the models and the data, and any confounding or reverse causation that might be occurring\n\n:::\n\n## Exploratory analysis\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"redcap_data_access_group\"],\"name\":[1],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"Number of Patients\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"addenbrookes_hospi\",\"2\":\"9\"},{\"1\":\"belfast_city_hospi\",\"2\":\"9\"},{\"1\":\"birmingham\",\"2\":\"20\"},{\"1\":\"edinburgh\",\"2\":\"11\"},{\"1\":\"guys_and_st_thomas\",\"2\":\"21\"},{\"1\":\"leeds_teaching_hos\",\"2\":\"14\"},{\"1\":\"liverpool_universi\",\"2\":\"6\"},{\"1\":\"manchester\",\"2\":\"20\"},{\"1\":\"nhs_greater_glasgo\",\"2\":\"10\"},{\"1\":\"nuth__freeman\",\"2\":\"14\"},{\"1\":\"oxford_university\",\"2\":\"12\"},{\"1\":\"plymouth\",\"2\":\"4\"},{\"1\":\"portsmouth_hospita\",\"2\":\"12\"},{\"1\":\"royal_free_london_ERAS\",\"2\":\"3\"},{\"1\":\"royal_free_london_NoERAS\",\"2\":\"4\"},{\"1\":\"royal_london_hospi\",\"2\":\"20\"},{\"1\":\"sheffield\",\"2\":\"5\"},{\"1\":\"uhw_cardiff\",\"2\":\"5\"},{\"1\":\"uhw_cardiff_NoERAS\",\"2\":\"5\"},{\"1\":\"university_hospita\",\"2\":\"9\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n\n::: {.notes}\nWith small group sizes, (e.g. fewer than 5-10 patients), there might be convergence issues when fitting the group-level effects. Additionally, the  variance of the group-level intercepts depends on the amount of data within each group.\n\n- Q: Is there any way of aggregating the centres?\n- How come both UHW Cardiff and Royal Free are split by ERAS and no ERAS, when ERAS is supposed to be done at a centre level?\n:::\n\n## Exploratory analysis: length of stay {.smaller}\n\n:::: {.columns}\n\n::: {.column width=\"40%\"}\n\n\n\n::: {.cell layout-nrow=\"2\"}\n::: {.cell-output-display}\n![](index_files/figure-revealjs/unnamed-chunk-6-1.png){width=960}\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-revealjs/unnamed-chunk-6-2.png){width=960}\n:::\n:::\n\n\n\n:::\n\n::: {.column width=\"60%\"}\n\n::: {.fragment .fade-in}\n\nIssues:\n\n::: {.incremental}\n- Clearly not Gaussian\n  - Consider: generalised linear model with a gamma distribution\n- Follow up was 30 days: *\"Because we didn't want to lose these patients from the analysis, they are coded as having the 'maximum' length of stay for our follow up (i.e. 30 days).\"*\n  - Consider: Survival analysis *e.g.* Kaplan-Meier, Cox model, Frailty model\n:::\n\n:::\n\n:::\n\n::: {.fragment .fade-in}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlmer(Log2lengthstay ~ Centre_ERAS_status + donor_age +\n     donor_type*CIT_mins + age + who_performance_status + \n     pre_emptivetx + (1|centre), data = data_craft)\n```\n:::\n\n\n\n:::\n:::\n\n::: {.notes}\nClearly not Gaussian:\n\n- GLM with a Gamma distribution: choosing a log-link function.\n  - This means the (exponential of the) coefficients represent multiplicative effects on the length of stay.\n\n**Steps:**\n\nI think it should be simplified as much as possible, with the aim to get a minimum trustworthy model – this will reduce the chances of overfitting and make the findings more generalisable.\n\n1. Can you plot a KM split by ERAS? See if a unadjusted model shows any difference in the survival curves. You will need to caveat that this is unadjusted for all other factors and that the ERAS effect could be moping up the centre effect also, but it is a good first ‘look’ at the data.\n2. A Cox with frailty (centre) term and ERAS as the only fixed effect: as ERAS is so confounded with the centre, we don’t want to be interpreting ‘ERAS effect’ without the presence of centre.\n3. Include one or two risk factors that you think (clinically) are the most important.\n:::\n\n# What will I bring to the job? \n\n## Skills \n::: {.incremental}\n- Research: *masters, PhD and at NHSBT*\n- Programming: *R, SAS, Python, and Stata*\n- Teaching: *at Leeds University and a secondary school*\n- Collaboration and working in interdisciplinary teams: *through the BTRU partnership*\n- Passionate! \n  - Want to make a difference through my work and love working as a medical statistician: varied, interesting and impactful!\n\n:::\n\n::: {.notes}\n**Research**\n\n- 1st Class w Honors MMath at Bristol\n- PhD from Leeds University: \n  - Forecasting large-scale complex simulators: classification, dimensional reduction, stochastic processes\n- Research within NHSBT: worked in NIHR Blood and Transplant Research Units (BTRU) partnership with clinicians at Cambridge and Newcastle university\n\n**Programming**\n\n- Strong R skills, including using RAP to create reproducible, accurate analysis (e.g. by implementing Quarto)\n- Use of version control and collaboration via git\n- Also know: Python and SAS\n\n**Teaching**\n\n- Small group tutorial teaching at Leeds University whilst doing my PhD\n- Two years of experience teaching at a secondary school and sixth form\n\n**Collaboration**\n\n:::\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}